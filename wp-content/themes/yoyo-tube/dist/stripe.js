/*! For license information please see stripe.js.LICENSE.txt */
(function(){var __webpack_modules__={"./assets/src/js/stripe/stripe-payment-handler.js":function(){eval('jQuery(document).ready(function ($) {\n  var stripe = Stripe("pk_test_51Q5gn6EQVKGjbQGAtUA9x0HT3lBThNmARbHCutAi87uNtZ5fWGL8e1C9AnAS2W7nNGKE2VLj3yUdKlFu5ydg4v8u00I7kJQ9kD"); // Stripe public key\n  var elements = stripe.elements();\n  var style = {\n    base: {\n      color: "#333333",\n      fontSize: "16px",\n      "::placeholder": {\n        color: "rgba(0, 0, 0, 0.6)"\n      },\n      backgroundColor: "#ffffff",\n      padding: "10px",\n      border: "1px solid #8a2be2",\n      borderRadius: "5px"\n    },\n    invalid: {\n      color: "#ff4d4d"\n    }\n  };\n  var card = elements.create("card", {\n    style: style\n  });\n  card.mount("#card-element");\n\n  // Toast notification function\n  function showToast(message) {\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "info";\n    // Set icon based on type\n    var icon = "fa-info-circle";\n    var title = "Information";\n    if (type === "success") {\n      icon = "fa-check-circle";\n      title = "Success";\n    } else if (type === "error") {\n      icon = "fa-exclamation-circle";\n      title = "Error";\n    } else if (type === "warning") {\n      icon = "fa-exclamation-triangle";\n      title = "Warning";\n    }\n\n    // Update toast content\n    var toast = $("#yoyo-toast");\n    toast.removeClass("success error warning info").addClass(type);\n    toast.find(".toast-icon i").removeClass().addClass("fas " + icon);\n    toast.find(".toast-title").text(title);\n    toast.find(".toast-body").text(message);\n\n    // Show toast\n    var bsToast = new bootstrap.Toast(toast);\n    bsToast.show();\n  }\n  card.addEventListener("change", function (event) {\n    if (event.error) {\n      showToast(event.error.message, "error");\n    }\n  });\n  $("#stripe-payment-form").on("submit", function (event) {\n    event.preventDefault();\n    $("#submit-payment").prop("disabled", true).text("Processing...");\n    stripe.createToken(card).then(function (result) {\n      if (result.error) {\n        showToast(result.error.message, "error");\n        $("#submit-payment").prop("disabled", false).text("Pay Now");\n      } else {\n        var data = {\n          action: "handle_stripe_payment",\n          stripeToken: result.token.id,\n          video_id: $("#video_id").val()\n        };\n        // Send token via AJAX\n        $.ajax({\n          url: yoyo_stripe_ajax.ajaxurl,\n          // endpoint\n          method: "POST",\n          data: data,\n          success: function success(response) {\n            if (response.success) {\n              showToast(response.message || "Payment successful!", "success");\n              setTimeout(function () {\n                window.location.reload();\n              }, 2000);\n            } else {\n              showToast(response.message || "Payment failed.", "error");\n            }\n          },\n          error: function error(xhr, statusText, _error) {\n            var errorMessage = "An error occurred. Please try again.";\n            if (xhr.responseJSON && xhr.responseJSON.data.message) {\n              errorMessage = xhr.responseJSON.data.message;\n            }\n            showToast(errorMessage, xhr.status);\n          },\n          complete: function complete() {\n            $("#submit-payment").prop("disabled", false).text("Pay Now");\n          }\n        });\n      }\n    });\n  });\n});\n\n//# sourceURL=webpack://yoyo-tube/./assets/src/js/stripe/stripe-payment-handler.js?')}},__webpack_exports__={};__webpack_modules__["./assets/src/js/stripe/stripe-payment-handler.js"]()})();